{"version":3,"sources":["components/Filter.js","components/PersonForm.js","services/resources.js","components/Entry.js","components/Persons.js","components/Notification.js","components/ErrorNotification.js","App.js","index.js"],"names":["Filter","newFilter","handleFilterChange","value","onChange","PersonForm","addEntry","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","axios","get","then","response","data","newObject","post","id","delete","obj","put","Entry","name","number","setPersons","persons","setNotification","setErrorNotification","onClick","window","confirm","personService","filter","person","setTimeout","catch","error","console","log","removeAndUpdate","Persons","personsToShow","map","key","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","ErrorNotification","App","useState","setNewFilter","setNewName","setNewNumber","notification","errorNotification","useEffect","initialPersons","regex","RegExp","test","event","target","preventDefault","personObject","existingPerson","find","ojb","toLowerCase","updatePerson","updatedPerson","returnedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2bed03d1.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ newFilter, handleFilterChange }) => (\r\n  <div>\r\n    filter by name: <input value={newFilter} onChange={handleFilterChange} />\r\n  </div>\r\n)\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst PersonForm = ({ addEntry, newName, handleNameChange, newNumber, handleNumberChange }) => (\r\n  <form onSubmit={addEntry}>\r\n    <div>\r\n      name: <input value={newName} onChange={handleNameChange} />\r\n    </div>\r\n    <div>\r\n      number: <input value={newNumber} onChange={handleNumberChange} />\r\n    </div>\r\n    <div>\r\n      <button type='submit'>add</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\nexport default PersonForm\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst del = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, obj) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, obj)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, del, update }\r\n","import React from 'react'\r\nimport personService from '../services/resources'\r\n\r\nconst Entry = ({ id, name, number, setPersons, persons, setNotification, setErrorNotification }) => {\r\n  const removeAndUpdate = (id) => {\r\n    if (window.confirm(`Delete ${name} ?`)) {\r\n      personService.del(id)\r\n        .then(response => {\r\n          setPersons(persons.filter(person => person.id !== id))\r\n\r\n          setNotification(`Deleted ${name}`)\r\n          setTimeout(() => {\r\n            setNotification('')\r\n          }, 4000)\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n          setErrorNotification(`${name} is already deleted from the server`)\r\n          setTimeout(() => {\r\n            setErrorNotification('')\r\n            setPersons(persons.filter(person => person.id !== id))\r\n          }, 4000)\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <li>\r\n      {name} {number}\r\n      &nbsp; <button onClick={() => removeAndUpdate(id)}>delete</button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Entry\r\n","import React from 'react'\r\nimport Entry from './Entry'\r\n\r\nconst Persons = ({ personsToShow, setPersons, persons, setNotification, setErrorNotification }) => (\r\n  <ul>\r\n    {personsToShow.map(person => <Entry key={person.id} id={person.id} name={person.name} number={person.number} setPersons={setPersons} persons={persons} setNotification={setNotification} setErrorNotification={setErrorNotification} />)}\r\n  </ul>\r\n)\r\n\r\nexport default Persons\r\n","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  const notificationStyle = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n\r\n  if (message === '') {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div style={notificationStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import React from 'react'\r\n\r\nconst ErrorNotification = ({ message }) => {\r\n  const notificationStyle = {\r\n    color: 'red',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n\r\n  if (message === '') {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div style={notificationStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ErrorNotification\r\n","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport personService from './services/resources'\nimport Notification from './components/Notification'\nimport ErrorNotification from './components/ErrorNotification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newFilter, setNewFilter] = useState('')\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [notification, setNotification] = useState('')\n  const [errorNotification, setErrorNotification] = useState('')\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n      .catch(error => {\n        console.log(error)\n        setErrorNotification('Could not connect to server')\n        setTimeout(() => {\n          setErrorNotification('')\n        }, 4000)\n      })\n  }, [])\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const regex = new RegExp(`.*${newFilter}`, 'i')\n\n  const personsToShow = newFilter\n    ? persons.filter(obj => regex.test(obj.name))\n    : persons\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const addEntry = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const existingPerson = persons.find(ojb => ojb.name.toLowerCase() === newName.toLowerCase())\n    const updatePerson = { ...existingPerson, number: newNumber }\n\n    if (existingPerson) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        personService.update(updatePerson.id, updatePerson)\n          .then(updatedPerson => {\n            setPersons(persons.map(person => person.id !== updatePerson.id ? person : updatedPerson))\n            setNewName('')\n            setNewNumber('')\n            setNotification(`Updated ${updatePerson.name}'s number`)\n            setTimeout(() => {\n              setNotification('')\n            }, 4000)\n          }\n          )\n          .catch(error => {\n            console.log(error)\n            setErrorNotification(`Could not update number! ${updatePerson.name} is deleted from the server`)\n            setTimeout(() => {\n              setErrorNotification('')\n              setPersons(persons.filter(person => person.id !== updatePerson.id))\n            }, 4000)\n          })\n      }\n    } else {\n      personService.create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setNotification(`Added ${returnedPerson.name}`)\n          setTimeout(() => {\n            setNotification('')\n          }, 4000)\n        })\n        .catch(error => {\n          console.log(error.response.data)\n          setErrorNotification(error.response.data)\n          setTimeout(() => {\n            setErrorNotification('')\n          }, 4000)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={notification} />\n      <ErrorNotification message={errorNotification} />\n\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange} />\n\n      <h3>Add a new</h3>\n\n      <PersonForm\n        addEntry={addEntry}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <h3>Entries</h3>\n\n      <Persons\n        personsToShow={personsToShow}\n        setPersons={setPersons}\n        persons={persons}\n        setNotification={setNotification}\n        setErrorNotification={setErrorNotification}\n      />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}